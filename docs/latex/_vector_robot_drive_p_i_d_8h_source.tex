\doxysection{Vector\+Robot\+Drive\+PID.\+h}
\hypertarget{_vector_robot_drive_p_i_d_8h_source}{}\label{_vector_robot_drive_p_i_d_8h_source}\index{src/drive/VectorRobotDrivePID.h@{src/drive/VectorRobotDrivePID.h}}
\mbox{\hyperlink{_vector_robot_drive_p_i_d_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_vector_robot_drive_p_i_d_8h}{VectorRobotDrivePID.h}}"{}}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00012\ \mbox{\hyperlink{class_vector_robot_drive_p_i_d_a03bbab97392e319de8825e09f3fee8a0}{VectorRobotDrivePID::VectorRobotDrivePID}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_motor_setup}{MotorSetup}}\ motorSetups[],\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_simple_robot_drive_a7363d480902fa312441ec5fb65ac9b4f}{numMotors}},}
\DoxyCodeLine{00013\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Print\ \&\mbox{\hyperlink{class_simple_robot_drive_ad47799a442b544b9634b70bb6dfd71d7}{output}},\ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_p_i_d_config}{PIDConfig}}\ \&xConfig,}
\DoxyCodeLine{00014\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_p_i_d_config}{PIDConfig}}\ \&yConfig,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_p_i_d_config}{PIDConfig}}\ \&thetaConfig)}
\DoxyCodeLine{00015\ \ \ \ \ :\ \mbox{\hyperlink{class_vector_robot_drive_ac12208c756f46a6a623ee55fab184202}{VectorRobotDrive}}(motorSetups,\ \mbox{\hyperlink{class_simple_robot_drive_a7363d480902fa312441ec5fb65ac9b4f}{numMotors}},\ \mbox{\hyperlink{class_simple_robot_drive_ad47799a442b544b9634b70bb6dfd71d7}{output}}),}
\DoxyCodeLine{00016\ \ \ \ \ \ \ pidController(xConfig,\ yConfig,\ thetaConfig),}
\DoxyCodeLine{00017\ \ \ \ \ \ \ targetPose(0,\ 0,\ \mbox{\hyperlink{namespace_motor_constants_a7f8c1148797ad32515e3b1b5496d3d23}{DRIVER\_START\_OFFSET}})\ \{\}}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00023\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_vector_robot_drive_p_i_d_a91319c62beedb0b52116fa06b05addcf}{VectorRobotDrivePID::SetTargetByVelocity}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{class_pose2_d}{Pose2D}}\ \&speedPose)\ \{}
\DoxyCodeLine{00024\ \ \ \textcolor{keyword}{static}\ elapsedMicros\ callTime\ =\ 0;}
\DoxyCodeLine{00025\ \ \ \textcolor{keywordtype}{float}\ totTime\ =\ callTime\ *\ 0.000001f;\ \ \textcolor{comment}{//\ Convert\ microseconds\ to\ seconds}}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \ \ \mbox{\hyperlink{class_pose2_d}{Pose2D}}\ deltaPose\ =\ \mbox{\hyperlink{class_pose2_d}{Pose2D}}(speedPose.\mbox{\hyperlink{class_pose2_d_ae8e7d88214fd18b3caf44862993414bf}{getX}}(),\ speedPose.\mbox{\hyperlink{class_pose2_d_a09eba33da07962e2b5d6dc978da98b1c}{getY}}(),\ speedPose.\mbox{\hyperlink{class_pose2_d_a914618ce4d7929a5354850452ce6153c}{getTheta}}())}
\DoxyCodeLine{00028\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .\mbox{\hyperlink{class_pose2_d_a925d35fcc25b400238c9164ff0406aa3}{multConstant}}(totTime)}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .\mbox{\hyperlink{class_pose2_d_a925d35fcc25b400238c9164ff0406aa3}{multConstant}}(0.7f);}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \ \ targetPose.\mbox{\hyperlink{class_pose2_d_ae3049db0e04c609a752653b055cdb29d}{add}}(deltaPose).\mbox{\hyperlink{class_pose2_d_a67a7ec63d39f70d7a5d65a60ce0ab13f}{fixTheta}}();}
\DoxyCodeLine{00032\ \ \ callTime\ =\ 0;\ \ \textcolor{comment}{//\ Reset\ the\ timer\ after\ updating}}
\DoxyCodeLine{00033\ \}}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00039\ \mbox{\hyperlink{class_pose2_d}{Pose2D}}\ \mbox{\hyperlink{class_vector_robot_drive_p_i_d_a38dab9f4e76cd5d549ad575bfcfb3c27}{VectorRobotDrivePID::Step}}()\ \{}
\DoxyCodeLine{00040\ \ \ \textcolor{keywordflow}{return}\ pidController.Step(\mbox{\hyperlink{class_simple_robot_drive_a9a3e6e5de26f8882708d93cf672f95de}{localization}}.getPosition(),\ targetPose);}
\DoxyCodeLine{00041\ \}}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00048\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_vector_robot_drive_p_i_d_a4ef306145bc4de97159941f615dcef30}{VectorRobotDrivePID::PrintInfo}}(Print\ \&\mbox{\hyperlink{class_simple_robot_drive_ad47799a442b544b9634b70bb6dfd71d7}{output}},\ \textcolor{keywordtype}{bool}\ printConfig)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00049\ \ \ \mbox{\hyperlink{class_simple_robot_drive_ad47799a442b544b9634b70bb6dfd71d7}{output}}.print(F(\textcolor{stringliteral}{"{}SimpleRobotDrive\ Configuration:\ "{}}));}
\DoxyCodeLine{00050\ \ \ \mbox{\hyperlink{class_simple_robot_drive_ad47799a442b544b9634b70bb6dfd71d7}{output}}.print(F(\textcolor{stringliteral}{"{}Number\ of\ Motors:\ "{}}));}
\DoxyCodeLine{00051\ \ \ \mbox{\hyperlink{class_simple_robot_drive_ad47799a442b544b9634b70bb6dfd71d7}{output}}.println(\mbox{\hyperlink{class_simple_robot_drive_a7363d480902fa312441ec5fb65ac9b4f}{numMotors}});}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ \mbox{\hyperlink{class_simple_robot_drive_a7363d480902fa312441ec5fb65ac9b4f}{numMotors}};\ i++)\ \{}
\DoxyCodeLine{00054\ \ \ \ \ \mbox{\hyperlink{class_simple_robot_drive_ad47799a442b544b9634b70bb6dfd71d7}{output}}.print(F(\textcolor{stringliteral}{"{}Motor\ "{}}));}
\DoxyCodeLine{00055\ \ \ \ \ \mbox{\hyperlink{class_simple_robot_drive_ad47799a442b544b9634b70bb6dfd71d7}{output}}.print(i);}
\DoxyCodeLine{00056\ \ \ \ \ \mbox{\hyperlink{class_simple_robot_drive_ad47799a442b544b9634b70bb6dfd71d7}{output}}.print(F(\textcolor{stringliteral}{"{}:\ "{}}));}
\DoxyCodeLine{00057\ \ \ \ \ \mbox{\hyperlink{class_simple_robot_drive_a83d11857695c2a76872226dffa8233f0}{motors}}[i]-\/>PrintInfo(\mbox{\hyperlink{class_simple_robot_drive_ad47799a442b544b9634b70bb6dfd71d7}{output}},\ printConfig);}
\DoxyCodeLine{00058\ \ \ \}}
\DoxyCodeLine{00059\ \}}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00065\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_vector_robot_drive_p_i_d_aa4deea05cb547246502a89b9217b63c0}{VectorRobotDrivePID::PrintLocal}}(Print\ \&\mbox{\hyperlink{class_simple_robot_drive_ad47799a442b544b9634b70bb6dfd71d7}{output}})\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00066\ \ \ \mbox{\hyperlink{class_simple_robot_drive_a9a3e6e5de26f8882708d93cf672f95de}{localization}}.PrintInfo(\mbox{\hyperlink{class_simple_robot_drive_ad47799a442b544b9634b70bb6dfd71d7}{output}});}
\DoxyCodeLine{00067\ \ \ \mbox{\hyperlink{class_simple_robot_drive_ad47799a442b544b9634b70bb6dfd71d7}{output}}.print(F(\textcolor{stringliteral}{"{}Target\ Location\ "{}}));}
\DoxyCodeLine{00068\ \ \ \mbox{\hyperlink{class_simple_robot_drive_ad47799a442b544b9634b70bb6dfd71d7}{output}}\ <<\ targetPose;}
\DoxyCodeLine{00069\ \}}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00076\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_vector_robot_drive_p_i_d_a75916e792c39254d6904b7ac67c48850}{VectorRobotDrivePID::PrintController}}(Print\ \&\mbox{\hyperlink{class_simple_robot_drive_ad47799a442b544b9634b70bb6dfd71d7}{output}},\ \textcolor{keywordtype}{bool}\ printConfig)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00077\ \ \ \mbox{\hyperlink{class_simple_robot_drive_ad47799a442b544b9634b70bb6dfd71d7}{output}}.println(F(\textcolor{stringliteral}{"{}PID\ Controller\ Details:"{}}));}
\DoxyCodeLine{00078\ \ \ pidController.PrintInfo(\mbox{\hyperlink{class_simple_robot_drive_ad47799a442b544b9634b70bb6dfd71d7}{output}},\ printConfig);}
\DoxyCodeLine{00079\ \}}

\end{DoxyCode}
